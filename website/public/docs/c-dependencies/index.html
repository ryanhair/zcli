<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="title">C/C++ Dependencies</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header class="site-header">
        <nav class="nav-container">
            <a href="/" class="logo">zcli</a>
            <div class="nav-links">
                <a href="/quickstart/">Quickstart</a>
                <a href="/docs/">Documentation</a>
                <a href="https://github.com/ryanhair/zcli">GitHub</a>
            </div>
        </nav>
    </header>

    <main id="main">
    <div class="docs-container">
        <aside class="docs-sidebar">
            <nav class="docs-nav">
                <div class="nav-section">
                    <h4>Getting Started</h4>
                    <ul>
                        <li><a href="/quickstart/">Quickstart</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <h4>Core Concepts</h4>
                    <ul>
                        <li><a href="/docs/commands/">Commands</a></li>
                        <li><a href="/docs/options/">Arguments &amp; Options</a></li>
                        <li><a href="/docs/aliases/">Command Aliases</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <h4>Advanced</h4>
                    <ul>
                        <li><a href="/docs/plugins/">Plugin System</a></li>
                        <li><a href="/docs/build-system/">Build System</a></li>
                        <li><a href="/docs/shared-modules/">Shared Modules</a></li>
                        <li><a href="/docs/c-dependencies/">C/C++ Dependencies</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <h4>Reference</h4>
                    <ul>
                        <li><a href="/docs/error-handling/">Error Handling</a></li>
                    </ul>
                </div>
            </nav>
        </aside>

        <article class="docs-content">
            <header class="docs-header">
                <h1>C/C++ Dependencies</h1>
            </header>
            <div class="docs-body">
                <p>Some commands need to integrate with C or C++ libraries (e.g., tree-sitter for parsing, SQLite for databases). zcli allows you to specify dependencies <strong>per command or command group</strong>.</p><h2>Basic Example: SQLite</h2><p>Only the <code>database</code> command gets SQLite:</p><pre><code class="zig"><span class="comment_documentation comment spell">// build.zig</span>
<span class="keyword">const</span> <span class="module constant variable_builtin type variable">std</span> <span class="operator">=</span> <span class="function_builtin keyword_import">@import</span><span class="punctuation_bracket">(</span><span class="string">&quot;std&quot;</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">;</span>

<span class="keyword_modifier">pub</span> <span class="keyword_function">fn</span> <span class="constant variable_builtin type variable function">build</span><span class="punctuation_bracket">(</span><span class="constant variable_builtin variable_parameter variable type">b</span><span class="punctuation_delimiter">:</span> <span class="operator">*</span><span class="constant variable_builtin type variable">std</span><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">Build</span><span class="punctuation_bracket">)</span> <span class="type_builtin">void</span> <span class="punctuation_bracket">{</span>
    <span class="keyword">const</span> <span class="constant variable_builtin type variable">target</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">b</span><span class="punctuation_delimiter">.</span><span class="type constant variable_builtin function_call variable_member variable">standardTargetOptions</span><span class="punctuation_bracket">(</span><span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span><span class="punctuation_bracket">}</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">;</span>
    <span class="keyword">const</span> <span class="constant variable_builtin type variable">optimize</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">b</span><span class="punctuation_delimiter">.</span><span class="type constant variable_builtin function_call variable_member variable">standardOptimizeOption</span><span class="punctuation_bracket">(</span><span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span><span class="punctuation_bracket">}</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">;</span>

    <span class="keyword">const</span> <span class="constant variable_builtin type variable">zcli_dep</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">b</span><span class="punctuation_delimiter">.</span><span class="type constant variable_builtin function_call variable_member variable">dependency</span><span class="punctuation_bracket">(</span><span class="string">&quot;zcli&quot;</span><span class="punctuation_delimiter">,</span> <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">target</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">target</span><span class="punctuation_delimiter">,</span>
        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">optimize</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">optimize</span><span class="punctuation_delimiter">,</span>
    <span class="punctuation_bracket">}</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">;</span>
    <span class="keyword">const</span> <span class="constant variable_builtin type variable">zcli_module</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">zcli_dep</span><span class="punctuation_delimiter">.</span><span class="type constant variable_builtin function_call variable_member variable">module</span><span class="punctuation_bracket">(</span><span class="string">&quot;zcli&quot;</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">;</span>

    <span class="comment_documentation comment spell">// Create a module for SQLite wrapper</span>
    <span class="keyword">const</span> <span class="constant variable_builtin type variable">sqlite_module</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">b</span><span class="punctuation_delimiter">.</span><span class="type constant variable_builtin function_call variable_member variable">createModule</span><span class="punctuation_bracket">(</span><span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">root_source_file</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">b</span><span class="punctuation_delimiter">.</span><span class="type constant variable_builtin function_call variable_member variable">path</span><span class="punctuation_bracket">(</span><span class="string">&quot;src/db/sqlite.zig&quot;</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">,</span>
        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">target</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">target</span><span class="punctuation_delimiter">,</span>
        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">optimize</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">optimize</span><span class="punctuation_delimiter">,</span>
    <span class="punctuation_bracket">}</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">;</span>

    <span class="keyword">const</span> <span class="constant variable_builtin type variable">exe</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">b</span><span class="punctuation_delimiter">.</span><span class="type constant variable_builtin function_call variable_member variable">addExecutable</span><span class="punctuation_bracket">(</span><span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">name</span> <span class="operator">=</span> <span class="string">&quot;myapp&quot;</span><span class="punctuation_delimiter">,</span>
        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">root_module</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">b</span><span class="punctuation_delimiter">.</span><span class="type constant variable_builtin function_call variable_member variable">createModule</span><span class="punctuation_bracket">(</span><span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
            <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">root_source_file</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">b</span><span class="punctuation_delimiter">.</span><span class="type constant variable_builtin function_call variable_member variable">path</span><span class="punctuation_bracket">(</span><span class="string">&quot;src/main.zig&quot;</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">,</span>
            <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">target</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">target</span><span class="punctuation_delimiter">,</span>
            <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">optimize</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">optimize</span><span class="punctuation_delimiter">,</span>
        <span class="punctuation_bracket">}</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">,</span>
    <span class="punctuation_bracket">}</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">;</span>

    <span class="constant variable_builtin type variable">exe</span><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">root_module</span><span class="punctuation_delimiter">.</span><span class="type constant variable_builtin function_call variable_member variable">addImport</span><span class="punctuation_bracket">(</span><span class="string">&quot;zcli&quot;</span><span class="punctuation_delimiter">,</span> <span class="constant variable_builtin type variable">zcli_module</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">;</span>

    <span class="keyword">const</span> <span class="module constant variable_builtin type variable">zcli</span> <span class="operator">=</span> <span class="function_builtin keyword_import">@import</span><span class="punctuation_bracket">(</span><span class="string">&quot;zcli&quot;</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">;</span>
    <span class="keyword">const</span> <span class="constant variable_builtin type variable">cmd_registry</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">zcli</span><span class="punctuation_delimiter">.</span><span class="type constant variable_builtin function_call variable_member variable">generate</span><span class="punctuation_bracket">(</span><span class="constant variable_builtin type variable">b</span><span class="punctuation_delimiter">,</span> <span class="constant variable_builtin type variable">exe</span><span class="punctuation_delimiter">,</span> <span class="constant variable_builtin type variable">zcli_dep</span><span class="punctuation_delimiter">,</span> <span class="constant variable_builtin type variable">zcli_module</span><span class="punctuation_delimiter">,</span> <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">commands_dir</span> <span class="operator">=</span> <span class="string">&quot;src/commands&quot;</span><span class="punctuation_delimiter">,</span>
        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">command_configs</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_bracket">[</span><span class="constant variable_builtin type variable">_</span><span class="punctuation_bracket">]</span><span class="constant variable_builtin type variable">zcli</span><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">CommandConfig</span><span class="punctuation_bracket">{</span>
            <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
                <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">command_path</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span><span class="string">&quot;database&quot;</span><span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
                <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">modules</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_bracket">[</span><span class="constant variable_builtin type variable">_</span><span class="punctuation_bracket">]</span><span class="constant variable_builtin type variable">zcli</span><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">CommandModule</span><span class="punctuation_bracket">{</span>
                    <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
                        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">name</span> <span class="operator">=</span> <span class="string">&quot;sqlite&quot;</span><span class="punctuation_delimiter">,</span>
                        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">module</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">sqlite_module</span><span class="punctuation_delimiter">,</span>
                        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">config</span> <span class="operator">=</span> <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
                            <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">system_libs</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span><span class="string">&quot;sqlite3&quot;</span><span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
                            <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">link_libc</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">true</span><span class="punctuation_delimiter">,</span>
                        <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
                    <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
                <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
            <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
        <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">plugins</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_bracket">[</span><span class="constant variable_builtin type variable">_</span><span class="punctuation_bracket">]</span><span class="constant variable_builtin type variable">zcli</span><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">PluginConfig</span><span class="punctuation_bracket">{</span> <span class="operator">/</span><span class="operator">*</span> <span class="variable_builtin">...</span> <span class="operator">*</span><span class="operator">/</span> <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">app_name</span> <span class="operator">=</span> <span class="string">&quot;myapp&quot;</span><span class="punctuation_delimiter">,</span>
        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">app_description</span> <span class="operator">=</span> <span class="string">&quot;My CLI application&quot;</span><span class="punctuation_delimiter">,</span>
    <span class="punctuation_bracket">}</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">;</span>

    <span class="constant variable_builtin type variable">exe</span><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">root_module</span><span class="punctuation_delimiter">.</span><span class="type constant variable_builtin function_call variable_member variable">addImport</span><span class="punctuation_bracket">(</span><span class="string">&quot;command_registry&quot;</span><span class="punctuation_delimiter">,</span> <span class="constant variable_builtin type variable">cmd_registry</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">;</span>
    <span class="constant variable_builtin type variable">b</span><span class="punctuation_delimiter">.</span><span class="type constant variable_builtin function_call variable_member variable">installArtifact</span><span class="punctuation_bracket">(</span><span class="constant variable_builtin type variable">exe</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">;</span>
<span class="punctuation_bracket">}</span>
</code></pre>
<p>Now only <code>database</code> has access to <code>sqlite</code>:</p><pre><code class="zig"><span class="comment_documentation comment spell">// src/commands/database.zig</span>
<span class="keyword">const</span> <span class="module constant variable_builtin type variable">std</span> <span class="operator">=</span> <span class="function_builtin keyword_import">@import</span><span class="punctuation_bracket">(</span><span class="string">&quot;std&quot;</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">;</span>
<span class="keyword">const</span> <span class="module constant variable_builtin type variable">zcli</span> <span class="operator">=</span> <span class="function_builtin keyword_import">@import</span><span class="punctuation_bracket">(</span><span class="string">&quot;zcli&quot;</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">;</span>
<span class="keyword">const</span> <span class="module constant variable_builtin type variable">sqlite</span> <span class="operator">=</span> <span class="function_builtin keyword_import">@import</span><span class="punctuation_bracket">(</span><span class="string">&quot;sqlite&quot;</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">;</span>  <span class="comment_documentation comment spell">// Only available here!</span>

<span class="keyword_modifier">pub</span> <span class="keyword">const</span> <span class="constant variable_builtin type variable">meta</span> <span class="operator">=</span> <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
    <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">description</span> <span class="operator">=</span> <span class="string">&quot;Database operations&quot;</span><span class="punctuation_delimiter">,</span>
<span class="punctuation_bracket">}</span><span class="punctuation_delimiter">;</span>

<span class="keyword_modifier">pub</span> <span class="keyword_function">fn</span> <span class="constant variable_builtin type variable function">execute</span><span class="punctuation_bracket">(</span><span class="constant variable_builtin variable_parameter variable type">args</span><span class="punctuation_delimiter">:</span> <span class="constant variable_builtin type variable">Args</span><span class="punctuation_delimiter">,</span> <span class="constant variable_builtin variable_parameter variable type">options</span><span class="punctuation_delimiter">:</span> <span class="constant variable_builtin type variable">Options</span><span class="punctuation_delimiter">,</span> <span class="constant variable_builtin variable_parameter variable type">context</span><span class="punctuation_delimiter">:</span> <span class="operator">*</span><span class="constant variable_builtin type variable">zcli</span><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">Context</span><span class="punctuation_bracket">)</span> <span class="operator">!</span><span class="type_builtin">void</span> <span class="punctuation_bracket">{</span>
    <span class="keyword">var</span> <span class="constant variable_builtin type variable">db</span> <span class="operator">=</span> <span class="keyword_exception">try</span> <span class="constant variable_builtin type variable">sqlite</span><span class="punctuation_delimiter">.</span><span class="type constant variable_builtin function_call variable_member variable">open</span><span class="punctuation_bracket">(</span><span class="constant variable_builtin type variable">context</span><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">allocator</span><span class="punctuation_delimiter">,</span> <span class="string">&quot;app.db&quot;</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">;</span>
    <span class="keyword">defer</span> <span class="constant variable_builtin type variable">db</span><span class="punctuation_delimiter">.</span><span class="type constant variable_builtin function_call variable_member variable">close</span><span class="punctuation_bracket">(</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">;</span>
    <span class="comment_documentation comment spell">// Use SQLite...</span>
<span class="punctuation_bracket">}</span>
</code></pre>
<h2>C/C++ Source Files</h2><p>For libraries that need compilation:</p><pre><code class="zig"><span class="keyword">const</span> <span class="constant variable_builtin type variable">parser_module</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">b</span><span class="punctuation_delimiter">.</span><span class="type constant variable_builtin function_call variable_member variable">createModule</span><span class="punctuation_bracket">(</span><span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
    <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">root_source_file</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">b</span><span class="punctuation_delimiter">.</span><span class="type constant variable_builtin function_call variable_member variable">path</span><span class="punctuation_bracket">(</span><span class="string">&quot;src/parser/tree_sitter.zig&quot;</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">,</span>
    <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">target</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">target</span><span class="punctuation_delimiter">,</span>
    <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">optimize</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">optimize</span><span class="punctuation_delimiter">,</span>
<span class="punctuation_bracket">}</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">;</span>

<span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable">command_configs</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_bracket">[</span><span class="constant variable_builtin type variable">_</span><span class="punctuation_bracket">]</span><span class="constant variable_builtin type variable">zcli</span><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">CommandConfig</span><span class="punctuation_bracket">{</span>
    <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">command_path</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span><span class="string">&quot;analyze&quot;</span><span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">modules</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_bracket">[</span><span class="constant variable_builtin type variable">_</span><span class="punctuation_bracket">]</span><span class="constant variable_builtin type variable">zcli</span><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">CommandModule</span><span class="punctuation_bracket">{</span>
            <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
                <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">name</span> <span class="operator">=</span> <span class="string">&quot;parser&quot;</span><span class="punctuation_delimiter">,</span>
                <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">module</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">parser_module</span><span class="punctuation_delimiter">,</span>
                <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">config</span> <span class="operator">=</span> <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
                    <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">c_sources</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
                        <span class="string">&quot;vendor/tree-sitter/lib/src/lib.c&quot;</span><span class="punctuation_delimiter">,</span>
                        <span class="string">&quot;vendor/tree-sitter-javascript/src/parser.c&quot;</span><span class="punctuation_delimiter">,</span>
                    <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
                    <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">c_flags</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span><span class="string">&quot;-std=c11&quot;</span><span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
                    <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">include_paths</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span><span class="string">&quot;vendor/tree-sitter/lib/include&quot;</span><span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
                <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
            <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
        <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
    <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
<span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
</code></pre>
<h2>Configuration Options</h2><p>All available options in <code>CommandModuleConfig</code>:</p><pre><code class="zig"><span class="keyword_modifier">pub</span> <span class="keyword">const</span> <span class="constant variable_builtin type variable">CommandModuleConfig</span> <span class="operator">=</span> <span class="keyword_type">struct</span> <span class="punctuation_bracket">{</span>
    <span class="comment_documentation comment spell">/// C source files to compile and link</span>
    <span class="constant variable_builtin type variable_member variable">c_sources</span><span class="punctuation_delimiter">:</span> <span class="operator">?</span><span class="punctuation_bracket">[</span><span class="punctuation_bracket">]</span><span class="keyword">const</span> <span class="punctuation_bracket">[</span><span class="punctuation_bracket">]</span><span class="keyword">const</span> <span class="type_builtin">u8</span> <span class="operator">=</span> <span class="constant_builtin">null</span><span class="punctuation_delimiter">,</span>

    <span class="comment_documentation comment spell">/// Flags to pass to the C compiler</span>
    <span class="constant variable_builtin type variable_member variable">c_flags</span><span class="punctuation_delimiter">:</span> <span class="operator">?</span><span class="punctuation_bracket">[</span><span class="punctuation_bracket">]</span><span class="keyword">const</span> <span class="punctuation_bracket">[</span><span class="punctuation_bracket">]</span><span class="keyword">const</span> <span class="type_builtin">u8</span> <span class="operator">=</span> <span class="constant_builtin">null</span><span class="punctuation_delimiter">,</span>

    <span class="comment_documentation comment spell">/// C++ source files to compile and link</span>
    <span class="constant variable_builtin type variable_member variable">cpp_sources</span><span class="punctuation_delimiter">:</span> <span class="operator">?</span><span class="punctuation_bracket">[</span><span class="punctuation_bracket">]</span><span class="keyword">const</span> <span class="punctuation_bracket">[</span><span class="punctuation_bracket">]</span><span class="keyword">const</span> <span class="type_builtin">u8</span> <span class="operator">=</span> <span class="constant_builtin">null</span><span class="punctuation_delimiter">,</span>

    <span class="comment_documentation comment spell">/// Flags to pass to the C++ compiler</span>
    <span class="constant variable_builtin type variable_member variable">cpp_flags</span><span class="punctuation_delimiter">:</span> <span class="operator">?</span><span class="punctuation_bracket">[</span><span class="punctuation_bracket">]</span><span class="keyword">const</span> <span class="punctuation_bracket">[</span><span class="punctuation_bracket">]</span><span class="keyword">const</span> <span class="type_builtin">u8</span> <span class="operator">=</span> <span class="constant_builtin">null</span><span class="punctuation_delimiter">,</span>

    <span class="comment_documentation comment spell">/// Additional include paths for C/C++ compilation</span>
    <span class="constant variable_builtin type variable_member variable">include_paths</span><span class="punctuation_delimiter">:</span> <span class="operator">?</span><span class="punctuation_bracket">[</span><span class="punctuation_bracket">]</span><span class="keyword">const</span> <span class="punctuation_bracket">[</span><span class="punctuation_bracket">]</span><span class="keyword">const</span> <span class="type_builtin">u8</span> <span class="operator">=</span> <span class="constant_builtin">null</span><span class="punctuation_delimiter">,</span>

    <span class="comment_documentation comment spell">/// System libraries to link against (e.g., &quot;sqlite3&quot;, &quot;curl&quot;)</span>
    <span class="constant variable_builtin type variable_member variable">system_libs</span><span class="punctuation_delimiter">:</span> <span class="operator">?</span><span class="punctuation_bracket">[</span><span class="punctuation_bracket">]</span><span class="keyword">const</span> <span class="punctuation_bracket">[</span><span class="punctuation_bracket">]</span><span class="keyword">const</span> <span class="type_builtin">u8</span> <span class="operator">=</span> <span class="constant_builtin">null</span><span class="punctuation_delimiter">,</span>

    <span class="comment_documentation comment spell">/// Link libc (auto-detected if c_sources or system_libs present)</span>
    <span class="constant variable_builtin type variable_member variable">link_libc</span><span class="punctuation_delimiter">:</span> <span class="operator">?</span><span class="type_builtin">bool</span> <span class="operator">=</span> <span class="constant_builtin">null</span><span class="punctuation_delimiter">,</span>

    <span class="comment_documentation comment spell">/// Link libc++ (auto-detected if cpp_sources present)</span>
    <span class="constant variable_builtin type variable_member variable">link_libcpp</span><span class="punctuation_delimiter">:</span> <span class="operator">?</span><span class="type_builtin">bool</span> <span class="operator">=</span> <span class="constant_builtin">null</span><span class="punctuation_delimiter">,</span>
<span class="punctuation_bracket">}</span><span class="punctuation_delimiter">;</span>
</code></pre>
<h2>Configuration Inheritance</h2><p>Configs inherit from parent command paths:</p><pre><code class="zig"><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable">command_configs</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_bracket">[</span><span class="constant variable_builtin type variable">_</span><span class="punctuation_bracket">]</span><span class="constant variable_builtin type variable">zcli</span><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">CommandConfig</span><span class="punctuation_bracket">{</span>
    <span class="comment_documentation comment spell">// All &apos;docker&apos; subcommands inherit this config</span>
    <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">command_path</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span><span class="string">&quot;docker&quot;</span><span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">modules</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_bracket">[</span><span class="constant variable_builtin type variable">_</span><span class="punctuation_bracket">]</span><span class="constant variable_builtin type variable">zcli</span><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">CommandModule</span><span class="punctuation_bracket">{</span>
            <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
                <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">name</span> <span class="operator">=</span> <span class="string">&quot;docker_lib&quot;</span><span class="punctuation_delimiter">,</span>
                <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">module</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">docker_module</span><span class="punctuation_delimiter">,</span>
                <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">config</span> <span class="operator">=</span> <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span> <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">system_libs</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span><span class="string">&quot;docker&quot;</span><span class="punctuation_bracket">}</span> <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
            <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
        <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
    <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>

    <span class="comment_documentation comment spell">// &apos;docker build&apos; gets additional modules</span>
    <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">command_path</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span><span class="string">&quot;docker&quot;</span><span class="punctuation_delimiter">,</span> <span class="string">&quot;build&quot;</span><span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">modules</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_bracket">[</span><span class="constant variable_builtin type variable">_</span><span class="punctuation_bracket">]</span><span class="constant variable_builtin type variable">zcli</span><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">CommandModule</span><span class="punctuation_bracket">{</span>
            <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
                <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">name</span> <span class="operator">=</span> <span class="string">&quot;docker_lib&quot;</span><span class="punctuation_delimiter">,</span>
                <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">module</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">docker_module</span><span class="punctuation_delimiter">,</span>
                <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">config</span> <span class="operator">=</span> <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span> <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">system_libs</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span><span class="string">&quot;docker&quot;</span><span class="punctuation_bracket">}</span> <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
            <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
            <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
                <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">name</span> <span class="operator">=</span> <span class="string">&quot;buildkit&quot;</span><span class="punctuation_delimiter">,</span>
                <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">module</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">buildkit_module</span><span class="punctuation_delimiter">,</span>
                <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">config</span> <span class="operator">=</span> <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span> <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">c_sources</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span><span class="string">&quot;vendor/buildkit/builder.c&quot;</span><span class="punctuation_bracket">}</span> <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
            <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
        <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
    <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
<span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
</code></pre>
<h3>Inheritance Rules</h3><ul><li>Exact command path matches take precedence</li><li>If no exact match, searches parent paths</li><li>Child configs completely override parent configs (no merging)</li></ul><h2>Multiple Commands, Same Library</h2><p>For unrelated commands needing the same library:</p><pre><code class="zig"><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable">command_configs</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_bracket">[</span><span class="constant variable_builtin type variable">_</span><span class="punctuation_bracket">]</span><span class="constant variable_builtin type variable">zcli</span><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">CommandConfig</span><span class="punctuation_bracket">{</span>
    <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">command_path</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span><span class="string">&quot;import&quot;</span><span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">modules</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_bracket">[</span><span class="constant variable_builtin type variable">_</span><span class="punctuation_bracket">]</span><span class="constant variable_builtin type variable">zcli</span><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">CommandModule</span><span class="punctuation_bracket">{</span>
            <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
                <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">name</span> <span class="operator">=</span> <span class="string">&quot;json&quot;</span><span class="punctuation_delimiter">,</span>
                <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">module</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">json_module</span><span class="punctuation_delimiter">,</span>
                <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">config</span> <span class="operator">=</span> <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span> <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">system_libs</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span><span class="string">&quot;jansson&quot;</span><span class="punctuation_bracket">}</span> <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
            <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
        <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
    <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
    <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">command_path</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span><span class="string">&quot;export&quot;</span><span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">modules</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_bracket">[</span><span class="constant variable_builtin type variable">_</span><span class="punctuation_bracket">]</span><span class="constant variable_builtin type variable">zcli</span><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">CommandModule</span><span class="punctuation_bracket">{</span>
            <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
                <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">name</span> <span class="operator">=</span> <span class="string">&quot;json&quot;</span><span class="punctuation_delimiter">,</span>
                <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">module</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">json_module</span><span class="punctuation_delimiter">,</span>
                <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">config</span> <span class="operator">=</span> <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span> <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">system_libs</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span><span class="string">&quot;jansson&quot;</span><span class="punctuation_bracket">}</span> <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
            <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
        <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
    <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
<span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
</code></pre>
<h2>Benefits</h2><ul><li><strong>Smaller binaries</strong>: Commands only link what they need</li><li><strong>Faster compilation</strong>: Isolated C dependencies dont trigger full rebuilds</li><li><strong>Clearer dependencies</strong>: Each commands requirements are explicit</li><li><strong>Better organization</strong>: Related C code stays with commands that use it</li></ul><h2>Name Collision Protection</h2><p>Module name collisions with shared modules produce compile-time errors:</p><pre><code class="zig"><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable">shared_modules</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_bracket">[</span><span class="constant variable_builtin type variable">_</span><span class="punctuation_bracket">]</span><span class="constant variable_builtin type variable">zcli</span><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">SharedModule</span><span class="punctuation_bracket">{</span>
    <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span> <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">name</span> <span class="operator">=</span> <span class="string">&quot;utils&quot;</span><span class="punctuation_delimiter">,</span> <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">module</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">utils_module</span> <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
<span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
<span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable">command_configs</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_bracket">[</span><span class="constant variable_builtin type variable">_</span><span class="punctuation_bracket">]</span><span class="constant variable_builtin type variable">zcli</span><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">CommandConfig</span><span class="punctuation_bracket">{</span>
    <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">command_path</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span><span class="string">&quot;foo&quot;</span><span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">modules</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_bracket">[</span><span class="constant variable_builtin type variable">_</span><span class="punctuation_bracket">]</span><span class="constant variable_builtin type variable">zcli</span><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">CommandModule</span><span class="punctuation_bracket">{</span>
            <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span> <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">name</span> <span class="operator">=</span> <span class="string">&quot;utils&quot;</span><span class="punctuation_delimiter">,</span> <span class="variable_builtin">...</span> <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>  <span class="comment_documentation comment spell">// ERROR: conflicts with shared module</span>
        <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
    <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
<span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
</code></pre>

            </div>
        </article>
    </div>
</main>

    <footer class="site-footer">
        <p>Built with Zig. MIT License.</p>
    </footer>
</body>
</html>
