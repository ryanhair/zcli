<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="title">Commands</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header class="site-header">
        <nav class="nav-container">
            <a href="/" class="logo">zcli</a>
            <div class="nav-links">
                <a href="/quickstart/">Quickstart</a>
                <a href="/docs/">Documentation</a>
                <a href="https://github.com/ryanhair/zcli">GitHub</a>
            </div>
        </nav>
    </header>

    <main id="main">
    <div class="docs-container">
        <aside class="docs-sidebar">
            <nav class="docs-nav">
                <div class="nav-section">
                    <h4>Getting Started</h4>
                    <ul>
                        <li><a href="/quickstart/">Quickstart</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <h4>Core Concepts</h4>
                    <ul>
                        <li><a href="/docs/commands/">Commands</a></li>
                        <li><a href="/docs/options/">Arguments &amp; Options</a></li>
                        <li><a href="/docs/aliases/">Command Aliases</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <h4>Advanced</h4>
                    <ul>
                        <li><a href="/docs/plugins/">Plugin System</a></li>
                        <li><a href="/docs/build-system/">Build System</a></li>
                        <li><a href="/docs/shared-modules/">Shared Modules</a></li>
                        <li><a href="/docs/c-dependencies/">C/C++ Dependencies</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <h4>Reference</h4>
                    <ul>
                        <li><a href="/docs/error-handling/">Error Handling</a></li>
                    </ul>
                </div>
            </nav>
        </aside>

        <article class="docs-content">
            <header class="docs-header">
                <h1>Commands</h1>
            </header>
            <div class="docs-body">
                <p>Commands are the building blocks of your CLI. Each command is a <code>.zig</code> file in your <code>src/commands/</code> directory.</p><h2>Basic Command Structure</h2><p>Every command file exports these declarations:</p><pre><code class="zig"><span class="keyword">const</span> <span class="module constant variable_builtin type variable">std</span> <span class="operator">=</span> <span class="function_builtin keyword_import">@import</span><span class="punctuation_bracket">(</span><span class="string">&quot;std&quot;</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">;</span>
<span class="keyword">const</span> <span class="module constant variable_builtin type variable">zcli</span> <span class="operator">=</span> <span class="function_builtin keyword_import">@import</span><span class="punctuation_bracket">(</span><span class="string">&quot;zcli&quot;</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">;</span>

<span class="keyword_modifier">pub</span> <span class="keyword">const</span> <span class="constant variable_builtin type variable">meta</span> <span class="operator">=</span> <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
    <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">description</span> <span class="operator">=</span> <span class="string">&quot;Command description&quot;</span><span class="punctuation_delimiter">,</span>
    <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">examples</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
        <span class="string">&quot;myapp command arg1&quot;</span><span class="punctuation_delimiter">,</span>
        <span class="string">&quot;myapp command --flag value&quot;</span><span class="punctuation_delimiter">,</span>
    <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
<span class="punctuation_bracket">}</span><span class="punctuation_delimiter">;</span>

<span class="keyword_modifier">pub</span> <span class="keyword">const</span> <span class="constant variable_builtin type variable">Args</span> <span class="operator">=</span> <span class="keyword_type">struct</span> <span class="punctuation_bracket">{</span>
    <span class="constant variable_builtin type variable_member variable">name</span><span class="punctuation_delimiter">:</span> <span class="punctuation_bracket">[</span><span class="punctuation_bracket">]</span><span class="keyword">const</span> <span class="type_builtin">u8</span><span class="punctuation_delimiter">,</span>
<span class="punctuation_bracket">}</span><span class="punctuation_delimiter">;</span>

<span class="keyword_modifier">pub</span> <span class="keyword">const</span> <span class="constant variable_builtin type variable">Options</span> <span class="operator">=</span> <span class="keyword_type">struct</span> <span class="punctuation_bracket">{</span>
    <span class="constant variable_builtin type variable_member variable">verbose</span><span class="punctuation_delimiter">:</span> <span class="type_builtin">bool</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">false</span><span class="punctuation_delimiter">,</span>
<span class="punctuation_bracket">}</span><span class="punctuation_delimiter">;</span>

<span class="keyword_modifier">pub</span> <span class="keyword_function">fn</span> <span class="constant variable_builtin type variable function">execute</span><span class="punctuation_bracket">(</span><span class="constant variable_builtin variable_parameter variable type">args</span><span class="punctuation_delimiter">:</span> <span class="constant variable_builtin type variable">Args</span><span class="punctuation_delimiter">,</span> <span class="constant variable_builtin variable_parameter variable type">options</span><span class="punctuation_delimiter">:</span> <span class="constant variable_builtin type variable">Options</span><span class="punctuation_delimiter">,</span> <span class="constant variable_builtin variable_parameter variable type">context</span><span class="punctuation_delimiter">:</span> <span class="operator">*</span><span class="constant variable_builtin type variable">zcli</span><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">Context</span><span class="punctuation_bracket">)</span> <span class="operator">!</span><span class="type_builtin">void</span> <span class="punctuation_bracket">{</span>
    <span class="keyword_exception">try</span> <span class="constant variable_builtin type variable">context</span><span class="punctuation_delimiter">.</span><span class="type constant variable_builtin function_call variable_member variable">stdout</span><span class="punctuation_bracket">(</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">.</span><span class="type constant variable_builtin function_call variable_member variable">print</span><span class="punctuation_bracket">(</span><span class="string">&quot;Hello {s}!</span><span class="string string_escape">\n</span><span class="string">&quot;</span><span class="punctuation_delimiter">,</span> <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span><span class="constant variable_builtin type variable">args</span><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">name</span><span class="punctuation_bracket">}</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">;</span>
<span class="punctuation_bracket">}</span>
</code></pre>
<h2>File-based Routing</h2><p>Your file structure directly maps to CLI commands:</p><pre><code>src/commands/
├── hello.zig          # myapp hello &lt;name&gt;
├── users/
│   ├── list.zig       # myapp users list
│   ├── create.zig     # myapp users create &lt;email&gt;
│   └── delete.zig     # myapp users delete &lt;id&gt;
└── config/
    ├── get.zig        # myapp config get &lt;key&gt;
    └── set.zig        # myapp config set &lt;key&gt; &lt;value&gt;
</code></pre><h2>Command Groups</h2><p>Organize related commands into groups using directories:</p><h3>Pure Groups (No index.zig)</h3><p>Directories without <code>index.zig</code> are purely organizational:</p><pre><code>src/commands/
├── users/
│   ├── list.zig    → &quot;users list&quot;
│   └── create.zig  → &quot;users create&quot;
</code></pre><p>Running <code>myapp users</code> shows help listing <code>list</code> and <code>create</code> subcommands.</p><h3>Metadata-Only Groups</h3><p>Add an <code>index.zig</code> with just <code>meta</code> for a description without executable behavior:</p><pre><code class="zig"><span class="comment_documentation comment spell">// src/commands/users/index.zig</span>
<span class="keyword_modifier">pub</span> <span class="keyword">const</span> <span class="constant variable_builtin type variable">meta</span> <span class="operator">=</span> <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
    <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">description</span> <span class="operator">=</span> <span class="string">&quot;Manage users in the system&quot;</span><span class="punctuation_delimiter">,</span>
<span class="punctuation_bracket">}</span><span class="punctuation_delimiter">;</span>
</code></pre>
<p>Running <code>myapp users</code> shows help with the description.</p><h3>Executable Groups</h3><p>Full command groups that can be executed directly:</p><pre><code class="zig"><span class="comment_documentation comment spell">// src/commands/users/index.zig</span>
<span class="keyword_modifier">pub</span> <span class="keyword">const</span> <span class="constant variable_builtin type variable">meta</span> <span class="operator">=</span> <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
    <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">description</span> <span class="operator">=</span> <span class="string">&quot;Manage users in the system&quot;</span><span class="punctuation_delimiter">,</span>
<span class="punctuation_bracket">}</span><span class="punctuation_delimiter">;</span>

<span class="keyword_modifier">pub</span> <span class="keyword">const</span> <span class="constant variable_builtin type variable">Args</span> <span class="operator">=</span> <span class="keyword_type">struct</span> <span class="punctuation_bracket">{</span><span class="punctuation_bracket">}</span><span class="punctuation_delimiter">;</span>
<span class="keyword_modifier">pub</span> <span class="keyword">const</span> <span class="constant variable_builtin type variable">Options</span> <span class="operator">=</span> <span class="keyword_type">struct</span> <span class="punctuation_bracket">{</span> <span class="constant variable_builtin type variable_member variable">all</span><span class="punctuation_delimiter">:</span> <span class="type_builtin">bool</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">false</span> <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">;</span>

<span class="keyword_modifier">pub</span> <span class="keyword_function">fn</span> <span class="constant variable_builtin type variable function">execute</span><span class="punctuation_bracket">(</span><span class="constant variable_builtin variable_parameter variable type">args</span><span class="punctuation_delimiter">:</span> <span class="constant variable_builtin type variable">Args</span><span class="punctuation_delimiter">,</span> <span class="constant variable_builtin variable_parameter variable type">options</span><span class="punctuation_delimiter">:</span> <span class="constant variable_builtin type variable">Options</span><span class="punctuation_delimiter">,</span> <span class="constant variable_builtin variable_parameter variable type">context</span><span class="punctuation_delimiter">:</span> <span class="operator">*</span><span class="constant variable_builtin type variable">zcli</span><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">Context</span><span class="punctuation_bracket">)</span> <span class="operator">!</span><span class="type_builtin">void</span> <span class="punctuation_bracket">{</span>
    <span class="comment_documentation comment spell">// Handles: myapp users</span>
<span class="punctuation_bracket">}</span>
</code></pre>
<h2>Rich Metadata</h2><p>Add descriptions, examples, and field-level documentation:</p><pre><code class="zig"><span class="keyword_modifier">pub</span> <span class="keyword">const</span> <span class="constant variable_builtin type variable">meta</span> <span class="operator">=</span> <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
    <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">description</span> <span class="operator">=</span> <span class="string">&quot;Deploy your application&quot;</span><span class="punctuation_delimiter">,</span>
    <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">examples</span> <span class="operator">=</span> <span class="operator">&amp;</span><span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
        <span class="string">&quot;deploy production&quot;</span><span class="punctuation_delimiter">,</span>
        <span class="string">&quot;deploy staging --rollback&quot;</span><span class="punctuation_delimiter">,</span>
        <span class="string">&quot;deploy production --replicas 5&quot;</span><span class="punctuation_delimiter">,</span>
    <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
    <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">args</span> <span class="operator">=</span> <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">environment</span> <span class="operator">=</span> <span class="string">&quot;Target environment (production, staging, development)&quot;</span><span class="punctuation_delimiter">,</span>
    <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
    <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">options</span> <span class="operator">=</span> <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span>
        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">replicas</span> <span class="operator">=</span> <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span> <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">description</span> <span class="operator">=</span> <span class="string">&quot;Number of instances to deploy&quot;</span> <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
        <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">rollback</span> <span class="operator">=</span> <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span> <span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">description</span> <span class="operator">=</span> <span class="string">&quot;Rollback to previous version&quot;</span> <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
    <span class="punctuation_bracket">}</span><span class="punctuation_delimiter">,</span>
<span class="punctuation_bracket">}</span><span class="punctuation_delimiter">;</span>
</code></pre>
<h2>Compile-Time Validation</h2><p>zcli validates all metadata fields at compile time:</p><pre><code class="bash"><span class="constant function">error:</span> <span class="constant">Unknown</span> <span class="constant">meta</span> <span class="constant">field:</span> <span class="string constant">&apos;desc&apos;</span><span class="constant">.</span> <span class="constant">Valid</span> <span class="constant">fields</span> <span class="constant">are:</span> <span class="constant">description,</span> <span class="constant">examples,</span> <span class="constant">args,</span> <span class="constant">options,</span> <span class="constant">hidden,</span> <span class="constant">aliases</span>
</code></pre>
<p>This ensures your CLI’s help text and documentation are always correct.</p><h2>Working with Context</h2><p>The <code>context</code> parameter gives you access to I/O streams, environment, and more:</p><pre><code class="zig"><span class="keyword_modifier">pub</span> <span class="keyword_function">fn</span> <span class="constant variable_builtin type variable function">execute</span><span class="punctuation_bracket">(</span><span class="constant variable_builtin variable_parameter variable type">args</span><span class="punctuation_delimiter">:</span> <span class="constant variable_builtin type variable">Args</span><span class="punctuation_delimiter">,</span> <span class="constant variable_builtin variable_parameter variable type">options</span><span class="punctuation_delimiter">:</span> <span class="constant variable_builtin type variable">Options</span><span class="punctuation_delimiter">,</span> <span class="constant variable_builtin variable_parameter variable type">context</span><span class="punctuation_delimiter">:</span> <span class="operator">*</span><span class="constant variable_builtin type variable">zcli</span><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">Context</span><span class="punctuation_bracket">)</span> <span class="operator">!</span><span class="type_builtin">void</span> <span class="punctuation_bracket">{</span>
    <span class="comment_documentation comment spell">// Memory allocation</span>
    <span class="keyword">const</span> <span class="constant variable_builtin type variable">allocator</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">context</span><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">allocator</span><span class="punctuation_delimiter">;</span>

    <span class="comment_documentation comment spell">// Output streams</span>
    <span class="keyword_exception">try</span> <span class="constant variable_builtin type variable">context</span><span class="punctuation_delimiter">.</span><span class="type constant variable_builtin function_call variable_member variable">stdout</span><span class="punctuation_bracket">(</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">.</span><span class="type constant variable_builtin function_call variable_member variable">print</span><span class="punctuation_bracket">(</span><span class="string">&quot;Success!</span><span class="string string_escape">\n</span><span class="string">&quot;</span><span class="punctuation_delimiter">,</span> <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span><span class="punctuation_bracket">}</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">;</span>
    <span class="keyword_exception">try</span> <span class="constant variable_builtin type variable">context</span><span class="punctuation_delimiter">.</span><span class="type constant variable_builtin function_call variable_member variable">stderr</span><span class="punctuation_bracket">(</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">.</span><span class="type constant variable_builtin function_call variable_member variable">print</span><span class="punctuation_bracket">(</span><span class="string">&quot;Warning: ...</span><span class="string string_escape">\n</span><span class="string">&quot;</span><span class="punctuation_delimiter">,</span> <span class="punctuation_delimiter">.</span><span class="punctuation_bracket">{</span><span class="punctuation_bracket">}</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">;</span>

    <span class="comment_documentation comment spell">// Environment variables</span>
    <span class="keyword">const</span> <span class="constant variable_builtin type variable">home</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">context</span><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">environment</span><span class="punctuation_delimiter">.</span><span class="type constant variable_builtin function_call variable_member variable">get</span><span class="punctuation_bracket">(</span><span class="string">&quot;HOME&quot;</span><span class="punctuation_bracket">)</span><span class="punctuation_delimiter">;</span>

    <span class="comment_documentation comment spell">// App metadata</span>
    <span class="keyword">const</span> <span class="constant variable_builtin type variable">app</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">context</span><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">app_name</span><span class="punctuation_delimiter">;</span>
    <span class="keyword">const</span> <span class="constant variable_builtin type variable">version</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">context</span><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">app_version</span><span class="punctuation_delimiter">;</span>

    <span class="comment_documentation comment spell">// Command path (for nested commands)</span>
    <span class="comment_documentation comment spell">// For &quot;myapp users create&quot;, command_path = [&quot;users&quot;, &quot;create&quot;]</span>
    <span class="keyword">const</span> <span class="constant variable_builtin type variable">path</span> <span class="operator">=</span> <span class="constant variable_builtin type variable">context</span><span class="punctuation_delimiter">.</span><span class="constant variable_builtin type variable_member variable">command_path</span><span class="punctuation_delimiter">;</span>
<span class="punctuation_bracket">}</span>
</code></pre>

            </div>
        </article>
    </div>
</main>

    <footer class="site-footer">
        <p>Built with Zig. MIT License.</p>
    </footer>
</body>
</html>
